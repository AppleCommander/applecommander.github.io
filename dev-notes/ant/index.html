



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Information site for the AppleCommander suite of tools">
      
      
        <link rel="canonical" href="https://applecommander.github.io/dev-notes/ant/">
      
      
        <meta name="author" content="a2geek">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../images/apple-logo.png">
      <meta name="generator" content="mkdocs-0.17.2, mkdocs-material-2.6.6">
    
    
      
        <title>Ant Task - AppleCommander</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.78aab2dc.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.6079476c.css">
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#using-the-apple-commander-ant-task" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://applecommander.github.io" title="AppleCommander" class="md-header-nav__button md-logo">
          
            <img src="../../images/apple-logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                AppleCommander
              </span>
              <span class="md-header-nav__topic">
                Ant Task
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../../images/apple-logo.png" width="24" height="24">
      
    </span>
    AppleCommander
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../install/" title="Installing" class="md-nav__link">
      Installing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../using/" title="Screenshots" class="md-nav__link">
      Screenshots
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../ac/" title="Using 'ac'" class="md-nav__link">
      Using 'ac'
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Develper Notes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Develper Notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../maven/" title="Maven GAV" class="md-nav__link">
      Maven GAV
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../uml/" title="UML diagrams" class="md-nav__link">
      UML diagrams
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Ant Task
      </label>
    
    <a href="./" title="Ant Task" class="md-nav__link md-nav__link--active">
      Ant Task
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#using-the-apple-commander-ant-task" title="Using the Apple Commander Ant task" class="md-nav__link">
    Using the Apple Commander Ant task
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../javadoc/" title="Javadoc" class="md-nav__link">
      Javadoc
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cc65-pipeline/" title="cc65 Pipeline" class="md-nav__link">
      cc65 Pipeline
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      History
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        History
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../history/current/" title="Current releases" class="md-nav__link">
      Current releases
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../history/version13514/" title="1.3.5.14 (27-Nov-2013)" class="md-nav__link">
      1.3.5.14 (27-Nov-2013)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../history/version135/" title="1.3.5 (01-Jun-2008)" class="md-nav__link">
      1.3.5 (01-Jun-2008)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../history/version134/" title="1.3.4 (31-Mar-2007)" class="md-nav__link">
      1.3.4 (31-Mar-2007)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../history/version133/" title="1.3.3 (18-Jun-2004)" class="md-nav__link">
      1.3.3 (18-Jun-2004)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../history/version132/" title="1.3.2 (05-Jun-2004)" class="md-nav__link">
      1.3.2 (05-Jun-2004)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../history/version131/" title="1.3.1 (12-Dec-2003)" class="md-nav__link">
      1.3.1 (12-Dec-2003)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../history/version130/" title="1.3.0 (04-Dec-2003)" class="md-nav__link">
      1.3.0 (04-Dec-2003)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../history/version123/" title="1.2.3 (13-Apr-2003)" class="md-nav__link">
      1.2.3 (13-Apr-2003)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../history/version122/" title="1.2.2 (15-Mar-2003)" class="md-nav__link">
      1.2.2 (15-Mar-2003)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../history/version121/" title="1.2.1 (01-Mar-2003)" class="md-nav__link">
      1.2.1 (01-Mar-2003)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../history/version120/" title="1.2.0 (11-Feb-2003)" class="md-nav__link">
      1.2.0 (11-Feb-2003)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../history/version111/" title="1.1.1 (30-Nov-2002)" class="md-nav__link">
      1.1.1 (30-Nov-2002)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../history/version110/" title="1.1 (12-Nov-2002)" class="md-nav__link">
      1.1 (12-Nov-2002)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../history/version100/" title="1.0 (28-Oct-2002)" class="md-nav__link">
      1.0 (28-Oct-2002)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#using-the-apple-commander-ant-task" title="Using the Apple Commander Ant task" class="md-nav__link">
    Using the Apple Commander Ant task
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Ant Task</h1>
                
                <p>The distribution file <code>AppleCommander-version-ac.jar</code> provides an Ant task that can be used as part of Ant-based builds.</p>
<h2 id="using-the-apple-commander-ant-task">Using the Apple Commander Ant task</h2>
<p>The AppleCommander Ant task mirrors the <code>ac</code> command line as much as possible. The advantage over using the ant task over simply calling the AppleCommander command line directly is speed. It is much faster to call on the Ant task than it is for ant to shell out to the system, fire up a Java instance, and then execute your command.
As with any external ant task, the first thing that must be done is to declare a <code>taskdef</code>:</p>
<pre><code>&lt;taskdef name=&quot;appleCommander&quot;
         classname=&quot;com.webcodepro.applecommander.ui.AntTask&quot;
         classpath=&quot;AppleCommander-${version}-ac.jar&quot;/&gt;
</code></pre>

<p>Where <code>${version}</code> would need to be defined by you to be the version of the command-line AppleCommander you are using. The first version of the AC command line that included this Ant task support is 1.3.5.13.</p>
<p>Once you have the <code>taskdef</code> defined, it can be called from within ant like this:</p>
<pre><code>&lt;!-- Call AppleCommander to print information about the disk image --&gt;
&lt;appleCommander command=&quot;i&quot; imagename=&quot;${myDiskImage}&quot; /&gt;
</code></pre>

<p>The values for command that the ant task understands generally mirror those of the command line. Here's a list of them, along with their required and optional parameters:</p>
<pre><code>i  &lt;imagename&gt; display information about an image.
ls &lt;imagename&gt; list brief directory of an image.
l  &lt;imagename&gt; list directory of an image.
ll &lt;imagename&gt; list detailed directory of an image.
e  &lt;imagename&gt; &lt;filename&gt; [&lt;output&gt;] export file from image to stdout or to an output file.
x  &lt;imagename&gt; [&lt;outputpath&gt;] extract all files from image to outputpath, or the current working directory if blank.
g  &lt;imagename&gt; &lt;filename&gt; [&lt;output&gt;] get raw file from image to stdout or to an output file.
p  &lt;imagename&gt; &lt;filename&gt; &lt;type&gt; [[$|0x]&lt;addr&gt;] put stdin in filename on image, using file type and address [0x2000].
d  &lt;imagename&gt; &lt;filename&gt; delete file from image.
k  &lt;imagename&gt; &lt;filename&gt; lock file on image.
u  &lt;imagename&gt; &lt;filename&gt; unlock file on image.
n  &lt;imagename&gt; &lt;volname&gt; change volume name (ProDOS or Pascal).
dos &lt;imagename&gt; &lt;filename&gt; &lt;type&gt; put stdin with DOS header in filename on image, using file type and address from header.
as &lt;imagename&gt; [&lt;filename&gt;] put stdin with AppleSingle format on image.
dos140 &lt;imagename&gt; create a 140K DOS 3.3 image.
pro140 &lt;imagename&gt; &lt;volname&gt; create a 140K ProDOS image.
pro800 &lt;imagename&gt; &lt;volname&gt; create an 800K ProDOS image.
pas140 &lt;imagename&gt; &lt;volname&gt; create a 140K Pascal image.
pas800 &lt;imagename&gt; &lt;volname&gt; create an 800K Pascal image.
convert &lt;filename&gt; &lt;imagename&gt; [&lt;sizeblocks&gt;] uncompress a ShrinkIt or Binary II file; or convert a DiskCopy 4.2 image into a ProDOS disk image.
</code></pre>

<p>For the commands that require a type parameter, their values depend on the operating system of the underlying image's operating system:</p>
<pre><code>DOS 3.x: A, B, I, T, S, R, a, b.
Pascal: bad, code, text, info, data, graf, foto.
ProDOS: bas, bin, sys, txt, rel, etc.; see ProdosFileTypes.properties for more.
</code></pre>

<p>In order to feed AppleCommander standard input, a file would be specified with the input parameter for the task - like this:</p>
<pre><code>&lt;appleCommander command=&quot;p&quot;
                input=&quot;manifest.mf&quot;
                imagename=&quot;${myDiskImage}&quot;
                filename=&quot;MANIFEST&quot;
                type=&quot;T&quot; /&gt;
</code></pre>

<p>In order to extract a file from an image to a real file, the real file would be specified with the output parameter for the task - like this:</p>
<pre><code>&lt;appleCommander command=&quot;g&quot;
                imagename=&quot;${myDiskImage}&quot;
                filename=&quot;MANIFEST&quot;
                output=&quot;manifest.mf&quot; /&gt;
</code></pre>

<p>AppleCommander ant tasks can be told to ignore errors with the <code>failonerror</code> parameter:</p>
<pre><code>&lt;appleCommander command=&quot;p&quot;
                failonerror=&quot;false&quot;
                input=&quot;${hugeFileExpectFailure}&quot;
                imagename=&quot;${pro800image}&quot;
                filename=&quot;BLOWUP&quot;
                type=&quot;txt&quot; /&gt;
</code></pre>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../uml/" title="UML diagrams" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                UML diagrams
              </span>
            </div>
          </a>
        
        
          <a href="../../javadoc/" title="Javadoc" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Javadoc
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.02434462.js"></script>
      
      <script>app.initialize({version:"0.17.2",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>