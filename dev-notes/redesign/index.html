
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Information site for the AppleCommander suite of tools">
      
      
        <meta name="author" content="a2geek">
      
      
        <link rel="canonical" href="https://applecommander.github.io/dev-notes/redesign/">
      
      
        <link rel="prev" href="../gav/">
      
      
        <link rel="next" href="../uml/">
      
      
      <link rel="icon" href="../../images/apple-logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>Updated API and UML - AppleCommander</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/mkdocs_puml/puml.css">
    
      <link rel="stylesheet" href="../../assets/mkdocs_puml/interaction.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#api-changes" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="AppleCommander" class="md-header__button md-logo" aria-label="AppleCommander" data-md-component="logo">
      
  <img src="../../images/apple-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            AppleCommander
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Updated API and UML
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/AppleCommander/AppleCommander" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    AppleCommander
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="AppleCommander" class="md-nav__button md-logo" aria-label="AppleCommander" data-md-component="logo">
      
  <img src="../../images/apple-logo.png" alt="logo">

    </a>
    AppleCommander
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/AppleCommander/AppleCommander" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    AppleCommander
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installing
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../using/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Screenshots
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ac/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using 'ac'
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../acx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using 'acx'
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Developer Notes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Developer Notes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../gav/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Maven/Gradle GAV
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Updated API and UML
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Updated API and UML
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#api-changes" class="md-nav__link">
    <span class="md-ellipsis">
      API changes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API changes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accessing-a-disk-image" class="md-nav__link">
    <span class="md-ellipsis">
      Accessing a disk image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sources" class="md-nav__link">
    <span class="md-ellipsis">
      Sources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disks" class="md-nav__link">
    <span class="md-ellipsis">
      Disks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-semi-experimental" class="md-nav__link">
    <span class="md-ellipsis">
      Other (semi-experimental)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Other (semi-experimental)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#databuffer" class="md-nav__link">
    <span class="md-ellipsis">
      DataBuffer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capabilityprovider" class="md-nav__link">
    <span class="md-ellipsis">
      CapabilityProvider
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hintprovider" class="md-nav__link">
    <span class="md-ellipsis">
      HintProvider
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#container" class="md-nav__link">
    <span class="md-ellipsis">
      Container
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#information" class="md-nav__link">
    <span class="md-ellipsis">
      Information
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../uml/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Historical UML diagrams
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../disassembler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Disassembler API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ant/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ant Task
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../javadoc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Javadoc
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cc65-pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    cc65 Pipeline
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    History
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            History
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../history/current/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Current releases
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../history/legacy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Legacy releases
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#api-changes" class="md-nav__link">
    <span class="md-ellipsis">
      API changes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API changes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accessing-a-disk-image" class="md-nav__link">
    <span class="md-ellipsis">
      Accessing a disk image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sources" class="md-nav__link">
    <span class="md-ellipsis">
      Sources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disks" class="md-nav__link">
    <span class="md-ellipsis">
      Disks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-semi-experimental" class="md-nav__link">
    <span class="md-ellipsis">
      Other (semi-experimental)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Other (semi-experimental)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#databuffer" class="md-nav__link">
    <span class="md-ellipsis">
      DataBuffer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capabilityprovider" class="md-nav__link">
    <span class="md-ellipsis">
      CapabilityProvider
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hintprovider" class="md-nav__link">
    <span class="md-ellipsis">
      HintProvider
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#container" class="md-nav__link">
    <span class="md-ellipsis">
      Container
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#information" class="md-nav__link">
    <span class="md-ellipsis">
      Information
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>Updated API and UML</h1>

<h2 id="api-changes">API changes</h2>
<p>As of AppleCommander 12, the API is starting to be redesigned. This page will capture what the "new world" looks like
if you are a developer using the AppleCommander APIs.</p>
<p>Changes (so far):</p>
<ul>
<li><code>ByteArrayImageLayout</code> was replaced with <code>Source</code>.</li>
<li><code>Source</code> discovery mechanism is now in <code>Source.Factory</code>.</li>
<li><code>Sources#create(Object)</code> is now used to create <code>Source</code> objects. Sometimes with a special <code>Source</code>.</li>
<li><code>Disk</code> was removed. After discovery was removed, it was just a placeholder and all functionality was merged into <code>FormattedDisk</code>.</li>
<li>Constants from <code>Disk</code> are now in <code>DiskConstants</code>.</li>
<li><code>FormattedDisk</code> discovery mechanism is now in <code>DiskFactory</code>.</li>
<li><code>Disks#inspect(Source)</code> is now used to initiate the <code>FormattedDisk</code> discovery mechanism.</li>
<li><code>ImageOrder</code> was replaced by <code>Device</code>. Specific cases are <code>BlockDevice</code> and <code>TrackSectorDevice</code>.</li>
</ul>
<h3 id="accessing-a-disk-image">Accessing a disk image</h3>
<p>With the removal of <code>Disk</code> as the discovery and creation mechanism, there are a couple of replacement hooks to be aware of:
A <code>FormattedDisk</code> originates from a <code>Source</code> (new) and is created via the discovery mechanism supported by <code>Disks</code>.</p>
<p>That is:</p>
<ol>
<li>Create a <code>Source</code> via <code>Sources</code>.</li>
<li>Use <code>Disks</code> to "discover" a list of <code>FormattedDisk</code> objects.</li>
</ol>
<h3 id="sources">Sources</h3>
<p>A <code>Source</code>, which replaces the layout, does some of the same stuff but supports discovery and complex types (such as 2IMG and DiskCopy).
Note that a source can wrap around another source, allowing a constant GZip support or data source (such as a <code>FileEntry</code> on an image
or a Shrinkit archive).</p>
<div class="highlight"><pre><span></span><code><span class="n">Source</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Sources</span><span class="p">.</span><span class="na">create</span><span class="p">(</span><span class="n">filename</span><span class="p">).</span><span class="na">orElseThrow</span><span class="p">();</span>
</code></pre></div>
<p>To create a source, pass in a <code>String</code>, <code>File</code>, <code>Path</code>, or another <code>Source</code> to the <code>Sources</code> factory. The <code>create(...)</code> method
returns an <code>Optional&lt;Source&gt;</code> just in case -- mostly, you can ignore the optional part and just retrieve the object.</p>
<div class='puml-container'><div class="puml light" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="CLASS" height="489px" preserveAspectRatio="xMidYMid meet" style="width:889px;height:489px;background:#FFFFFF;" version="1.1" viewBox="0 0 889 489" width="889px" zoomAndPan="magnify" class="diagram"><defs/><g><g class="entity" data-entity="CapabilityProvider" data-source-line="2" data-uid="ent0002" id="entity_CapabilityProvider"><rect fill="#F1F1F1" height="64.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="255.8857" x="7" y="15.15"/><ellipse cx="66.5205" cy="31.15" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M62.4424,26.9156 L62.4424,24.7594 L69.833,24.7594 L69.833,26.9156 L67.3643,26.9156 L67.3643,34.9938 L69.833,34.9938 L69.833,37.15 L62.4424,37.15 L62.4424,34.9938 L64.9111,34.9938 L64.9111,26.9156 L62.4424,26.9156 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="128.3447" x="87.0205" y="35.9967">CapabilityProvider</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="261.8857" y1="47.15" y2="47.15"/><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="261.8857" y1="55.15" y2="55.15"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="243.8857" x="13" y="72.1451">boolean can(Capability capability);</text></g><g class="entity" data-entity="HintProvider" data-source-line="5" data-uid="ent0003" id="entity_HintProvider"><rect fill="#F1F1F1" height="80.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="260.6914" x="297.6" y="7"/><ellipse cx="380.2089" cy="23" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M376.1308,18.7656 L376.1308,16.6094 L383.5214,16.6094 L383.5214,18.7656 L381.0526,18.7656 L381.0526,26.8438 L383.5214,26.8438 L383.5214,29 L376.1308,29 L376.1308,26.8438 L378.5995,26.8438 L378.5995,18.7656 L376.1308,18.7656 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86.9736" x="400.7089" y="27.8467">HintProvider</text><line style="stroke:#181818;stroke-width:0.5;" x1="298.6" x2="557.2914" y1="39" y2="39"/><line style="stroke:#181818;stroke-width:0.5;" x1="298.6" x2="557.2914" y1="47" y2="47"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="147.6016" x="303.6" y="63.9951">boolean is(Hint hint);</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="248.6914" x="303.6" y="80.292">default boolean isAny(Hint... hints);</text></g><g class="entity" data-entity="Container" data-source-line="9" data-uid="ent0004" id="entity_Container"><rect fill="#F1F1F1" height="64.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="289.751" x="593.07" y="15.15"/><ellipse cx="699.4885" cy="31.15" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M695.4103,26.9156 L695.4103,24.7594 L702.801,24.7594 L702.801,26.9156 L700.3322,26.9156 L700.3322,34.9938 L702.801,34.9938 L702.801,37.15 L695.4103,37.15 L695.4103,34.9938 L697.8791,34.9938 L697.8791,26.9156 L695.4103,26.9156 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="68.4141" x="719.9885" y="35.9967">Container</text><line style="stroke:#181818;stroke-width:0.5;" x1="594.07" x2="881.821" y1="47.15" y2="47.15"/><line style="stroke:#181818;stroke-width:0.5;" x1="594.07" x2="881.821" y1="55.15" y2="55.15"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="277.751" x="599.07" y="72.1451">&lt;T&gt; Optional&lt;T&gt; get(Class&lt;T&gt; iface);</text></g><g class="entity" data-entity="Source" data-source-line="12" data-uid="ent0005" id="entity_Source"><rect fill="#F1F1F1" height="227.2656" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="353.4072" x="251.24" y="147.59"/><ellipse cx="399.4978" cy="163.59" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M395.4197,159.3556 L395.4197,157.1994 L402.8103,157.1994 L402.8103,159.3556 L400.3416,159.3556 L400.3416,167.4338 L402.8103,167.4338 L402.8103,169.59 L395.4197,169.59 L395.4197,167.4338 L397.8884,167.4338 L397.8884,159.3556 L395.4197,159.3556 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="48.3916" x="419.9978" y="168.4367">Source</text><line style="stroke:#181818;stroke-width:0.5;" x1="252.24" x2="603.6472" y1="179.59" y2="179.59"/><line style="stroke:#181818;stroke-width:0.5;" x1="252.24" x2="603.6472" y1="187.59" y2="187.59"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90.0703" x="257.24" y="204.5851">int getSize();</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126.1641" x="257.24" y="220.882">String getName();</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="184.7002" x="257.24" y="237.1789">DataBuffer readAllBytes();</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="306.0928" x="257.24" y="253.4757">DataBuffer readBytes(int offset, int length);</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="307.7402" x="257.24" y="269.7726">void writeBytes(int offset, DataBuffer data);</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163.2969" x="257.24" y="286.0695">boolean hasChanged();</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145.1475" x="257.24" y="302.3664">void clearChanges();</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="230.3574" x="257.24" y="318.6632">List&lt;Information&gt; information();</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="271.7217" x="257.24" y="334.9601">default boolean isApproxEQ(int value);</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="268.502" x="257.24" y="351.257">default boolean isApproxLE(int value);</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="341.4072" x="257.24" y="367.5539">default boolean extensionLike(String extension);</text></g><g class="entity" data-entity="FileSource" data-source-line="25" data-uid="ent0009" id="entity_FileSource"><rect fill="#F1F1F1" height="48" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="104.8369" x="11.52" y="434.86"/><ellipse cx="26.52" cy="450.86" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M29.4888,456.5006 Q28.9106,456.7975 28.27,456.9381 Q27.6294,457.0944 26.9263,457.0944 Q24.4263,457.0944 23.0981,455.4538 Q21.7856,453.7975 21.7856,450.6725 Q21.7856,447.5475 23.0981,445.8913 Q24.4263,444.235 26.9263,444.235 Q27.6294,444.235 28.27,444.3913 Q28.9263,444.5475 29.4888,444.8444 L29.4888,447.5631 Q28.8638,446.985 28.27,446.7194 Q27.6763,446.4381 27.0513,446.4381 Q25.7075,446.4381 25.02,447.5163 Q24.3325,448.5788 24.3325,450.6725 Q24.3325,452.7663 25.02,453.8444 Q25.7075,454.9069 27.0513,454.9069 Q27.6763,454.9069 28.27,454.6413 Q28.8638,454.36 29.4888,453.7819 L29.4888,456.5006 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72.8369" x="40.52" y="455.7067">FileSource</text><line style="stroke:#181818;stroke-width:0.5;" x1="12.52" x2="115.3569" y1="466.86" y2="466.86"/><line style="stroke:#181818;stroke-width:0.5;" x1="12.52" x2="115.3569" y1="474.86" y2="474.86"/></g><g class="entity" data-entity="UniversalDiskImage" data-source-line="27" data-uid="ent0011" id="entity_UniversalDiskImage"><rect fill="#F1F1F1" height="48" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="171.3438" x="151.27" y="434.86"/><ellipse cx="166.27" cy="450.86" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M169.2388,456.5006 Q168.6606,456.7975 168.02,456.9381 Q167.3794,457.0944 166.6763,457.0944 Q164.1763,457.0944 162.8481,455.4538 Q161.5356,453.7975 161.5356,450.6725 Q161.5356,447.5475 162.8481,445.8913 Q164.1763,444.235 166.6763,444.235 Q167.3794,444.235 168.02,444.3913 Q168.6763,444.5475 169.2388,444.8444 L169.2388,447.5631 Q168.6138,446.985 168.02,446.7194 Q167.4263,446.4381 166.8013,446.4381 Q165.4575,446.4381 164.77,447.5163 Q164.0825,448.5788 164.0825,450.6725 Q164.0825,452.7663 164.77,453.8444 Q165.4575,454.9069 166.8013,454.9069 Q167.4263,454.9069 168.02,454.6413 Q168.6138,454.36 169.2388,453.7819 L169.2388,456.5006 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139.3438" x="180.27" y="455.7067">UniversalDiskImage</text><line style="stroke:#181818;stroke-width:0.5;" x1="152.27" x2="321.6138" y1="466.86" y2="466.86"/><line style="stroke:#181818;stroke-width:0.5;" x1="152.27" x2="321.6138" y1="474.86" y2="474.86"/></g><g class="entity" data-entity="DiskCopyImage" data-source-line="29" data-uid="ent0013" id="entity_DiskCopyImage"><rect fill="#F1F1F1" height="48" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141.4297" x="357.23" y="434.86"/><ellipse cx="372.23" cy="450.86" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M375.1988,456.5006 Q374.6206,456.7975 373.98,456.9381 Q373.3394,457.0944 372.6363,457.0944 Q370.1363,457.0944 368.8081,455.4538 Q367.4956,453.7975 367.4956,450.6725 Q367.4956,447.5475 368.8081,445.8913 Q370.1363,444.235 372.6363,444.235 Q373.3394,444.235 373.98,444.3913 Q374.6363,444.5475 375.1988,444.8444 L375.1988,447.5631 Q374.5738,446.985 373.98,446.7194 Q373.3863,446.4381 372.7613,446.4381 Q371.4175,446.4381 370.73,447.5163 Q370.0425,448.5788 370.0425,450.6725 Q370.0425,452.7663 370.73,453.8444 Q371.4175,454.9069 372.7613,454.9069 Q373.3863,454.9069 373.98,454.6413 Q374.5738,454.36 375.1988,453.7819 L375.1988,456.5006 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109.4297" x="386.23" y="455.7067">DiskCopyImage</text><line style="stroke:#181818;stroke-width:0.5;" x1="358.23" x2="497.6597" y1="466.86" y2="466.86"/><line style="stroke:#181818;stroke-width:0.5;" x1="358.23" x2="497.6597" y1="474.86" y2="474.86"/></g><g class="entity" data-entity="DataBufferSource" data-source-line="31" data-uid="ent0015" id="entity_DataBufferSource"><rect fill="#F1F1F1" height="48" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="156.5234" x="533.68" y="434.86"/><ellipse cx="548.68" cy="450.86" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M551.6488,456.5006 Q551.0706,456.7975 550.43,456.9381 Q549.7894,457.0944 549.0863,457.0944 Q546.5863,457.0944 545.2581,455.4538 Q543.9456,453.7975 543.9456,450.6725 Q543.9456,447.5475 545.2581,445.8913 Q546.5863,444.235 549.0863,444.235 Q549.7894,444.235 550.43,444.3913 Q551.0863,444.5475 551.6488,444.8444 L551.6488,447.5631 Q551.0238,446.985 550.43,446.7194 Q549.8363,446.4381 549.2113,446.4381 Q547.8675,446.4381 547.18,447.5163 Q546.4925,448.5788 546.4925,450.6725 Q546.4925,452.7663 547.18,453.8444 Q547.8675,454.9069 549.2113,454.9069 Q549.8363,454.9069 550.43,454.6413 Q551.0238,454.36 551.6488,453.7819 L551.6488,456.5006 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124.5234" x="562.68" y="455.7067">DataBufferSource</text><line style="stroke:#181818;stroke-width:0.5;" x1="534.68" x2="689.2034" y1="466.86" y2="466.86"/><line style="stroke:#181818;stroke-width:0.5;" x1="534.68" x2="689.2034" y1="474.86" y2="474.86"/></g><g class="entity" data-entity="FileEntrySource" data-source-line="33" data-uid="ent0017" id="entity_FileEntrySource"><rect fill="#F1F1F1" height="48" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="142.0859" x="724.9" y="434.86"/><ellipse cx="739.9" cy="450.86" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M742.8688,456.5006 Q742.2906,456.7975 741.65,456.9381 Q741.0094,457.0944 740.3063,457.0944 Q737.8063,457.0944 736.4781,455.4538 Q735.1656,453.7975 735.1656,450.6725 Q735.1656,447.5475 736.4781,445.8913 Q737.8063,444.235 740.3063,444.235 Q741.0094,444.235 741.65,444.3913 Q742.3063,444.5475 742.8688,444.8444 L742.8688,447.5631 Q742.2438,446.985 741.65,446.7194 Q741.0563,446.4381 740.4313,446.4381 Q739.0875,446.4381 738.4,447.5163 Q737.7125,448.5788 737.7125,450.6725 Q737.7125,452.7663 738.4,453.8444 Q739.0875,454.9069 740.4313,454.9069 Q741.0563,454.9069 741.65,454.6413 Q742.2438,454.36 742.8688,453.7819 L742.8688,456.5006 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110.0859" x="753.9" y="455.7067">FileEntrySource</text><line style="stroke:#181818;stroke-width:0.5;" x1="725.9" x2="865.9859" y1="466.86" y2="466.86"/><line style="stroke:#181818;stroke-width:0.5;" x1="725.9" x2="865.9859" y1="474.86" y2="474.86"/></g><g class="link" data-entity-1="CapabilityProvider" data-entity-2="Source" data-source-line="13" data-uid="lnk6" id="link_CapabilityProvider_Source"><path d="M193.0769,90.3462 C218.3469,108.6162 237.29,122.32 271.54,147.1" fill="none" id="CapabilityProvider-backto-Source" style="stroke:#181818;stroke-width:1;"/><polygon fill="none" points="178.49,79.8,189.5615,95.2085,196.5923,85.4839,178.49,79.8" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="HintProvider" data-entity-2="Source" data-source-line="13" data-uid="lnk7" id="link_HintProvider_Source"><path d="M427.94,105.66 C427.94,122.78 427.94,125.8 427.94,147.2" fill="none" id="HintProvider-backto-Source" style="stroke:#181818;stroke-width:1;"/><polygon fill="none" points="427.94,87.66,421.94,105.66,433.94,105.66,427.94,87.66" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="Container" data-entity-2="Source" data-source-line="13" data-uid="lnk8" id="link_Container_Source"><path d="M677.0078,89.9545 C650.2678,108.2245 629.66,122.32 593.42,147.1" fill="none" id="Container-backto-Source" style="stroke:#181818;stroke-width:1;"/><polygon fill="none" points="691.87,79.8,673.6229,85.0005,680.3926,94.9086,691.87,79.8" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="Source" data-entity-2="FileSource" data-uid="lnk10" id="link_Source_FileSource"><path d="M234.8851,365.9819 C181.5451,394.6519 143.52,415.09 107.42,434.49" fill="none" id="Source-backto-FileSource" style="stroke:#181818;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="none" points="250.74,357.46,232.0445,360.697,237.7258,371.2669,250.74,357.46" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="Source" data-entity-2="UniversalDiskImage" data-uid="lnk12" id="link_Source_UniversalDiskImage"><path d="M305.0945,388.0585 C283.0945,410.5885 274.74,419.15 259.7,434.55" fill="none" id="Source-backto-UniversalDiskImage" style="stroke:#181818;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="none" points="317.67,375.18,300.8016,383.8667,309.3873,392.2503,317.67,375.18" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="Source" data-entity-2="DiskCopyImage" data-uid="lnk14" id="link_Source_DiskCopyImage"><path d="M427.94,393.18 C427.94,415.71 427.94,419.15 427.94,434.55" fill="none" id="Source-backto-DiskCopyImage" style="stroke:#181818;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="none" points="427.94,375.18,421.94,393.18,433.94,393.18,427.94,375.18" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="Source" data-entity-2="DataBufferSource" data-uid="lnk16" id="link_Source_DataBufferSource"><path d="M546.512,388.2919 C567.702,410.8219 575.53,419.15 590.02,434.55" fill="none" id="Source-backto-DataBufferSource" style="stroke:#181818;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="none" points="534.18,375.18,542.1414,392.4025,550.8826,384.1812,534.18,375.18" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="Source" data-entity-2="FileEntrySource" data-uid="lnk18" id="link_Source_FileEntrySource"><path d="M620.834,364.7686 C675.334,393.7386 714.76,414.7 751.74,434.36" fill="none" id="Source-backto-FileEntrySource" style="stroke:#181818;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="none" points="604.94,356.32,618.0178,370.0666,623.6503,359.4706,604.94,356.32" style="stroke:#181818;stroke-width:1;"/></g></g></svg></div><div class="puml dark" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="CLASS" height="489px" preserveAspectRatio="xMidYMid meet" style="width:889px;height:489px;background:#1B1B1B;" version="1.1" viewBox="0 0 889 489" width="889px" zoomAndPan="magnify" class="diagram"><defs/><g><rect fill="#1B1B1B" height="489" style="stroke:none;stroke-width:1;" width="889" x="0" y="0"/><g class="entity" data-entity="CapabilityProvider" data-source-line="2" data-uid="ent0002" id="entity_CapabilityProvider"><rect fill="#313139" height="64.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="255.8857" x="7" y="15.15"/><ellipse cx="66.5205" cy="31.15" fill="#352866" rx="11" ry="11" style="stroke:#E7E7E7;stroke-width:1;"/><path d="M62.4424,26.9156 L62.4424,24.7594 L69.833,24.7594 L69.833,26.9156 L67.3643,26.9156 L67.3643,34.9938 L69.833,34.9938 L69.833,37.15 L62.4424,37.15 L62.4424,34.9938 L64.9111,34.9938 L64.9111,26.9156 L62.4424,26.9156 Z " fill="#FFFFFF"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="128.3447" x="87.0205" y="35.9967">CapabilityProvider</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="8" x2="261.8857" y1="47.15" y2="47.15"/><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="8" x2="261.8857" y1="55.15" y2="55.15"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="243.8857" x="13" y="72.1451">boolean can(Capability capability);</text></g><g class="entity" data-entity="HintProvider" data-source-line="5" data-uid="ent0003" id="entity_HintProvider"><rect fill="#313139" height="80.5938" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="260.6914" x="297.6" y="7"/><ellipse cx="380.2089" cy="23" fill="#352866" rx="11" ry="11" style="stroke:#E7E7E7;stroke-width:1;"/><path d="M376.1308,18.7656 L376.1308,16.6094 L383.5214,16.6094 L383.5214,18.7656 L381.0526,18.7656 L381.0526,26.8438 L383.5214,26.8438 L383.5214,29 L376.1308,29 L376.1308,26.8438 L378.5995,26.8438 L378.5995,18.7656 L376.1308,18.7656 Z " fill="#FFFFFF"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86.9736" x="400.7089" y="27.8467">HintProvider</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="298.6" x2="557.2914" y1="39" y2="39"/><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="298.6" x2="557.2914" y1="47" y2="47"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="147.6016" x="303.6" y="63.9951">boolean is(Hint hint);</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="248.6914" x="303.6" y="80.292">default boolean isAny(Hint... hints);</text></g><g class="entity" data-entity="Container" data-source-line="9" data-uid="ent0004" id="entity_Container"><rect fill="#313139" height="64.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="289.751" x="593.07" y="15.15"/><ellipse cx="699.4885" cy="31.15" fill="#352866" rx="11" ry="11" style="stroke:#E7E7E7;stroke-width:1;"/><path d="M695.4103,26.9156 L695.4103,24.7594 L702.801,24.7594 L702.801,26.9156 L700.3322,26.9156 L700.3322,34.9938 L702.801,34.9938 L702.801,37.15 L695.4103,37.15 L695.4103,34.9938 L697.8791,34.9938 L697.8791,26.9156 L695.4103,26.9156 Z " fill="#FFFFFF"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="68.4141" x="719.9885" y="35.9967">Container</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="594.07" x2="881.821" y1="47.15" y2="47.15"/><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="594.07" x2="881.821" y1="55.15" y2="55.15"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="277.751" x="599.07" y="72.1451">&lt;T&gt; Optional&lt;T&gt; get(Class&lt;T&gt; iface);</text></g><g class="entity" data-entity="Source" data-source-line="12" data-uid="ent0005" id="entity_Source"><rect fill="#313139" height="227.2656" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="353.4072" x="251.24" y="147.59"/><ellipse cx="399.4978" cy="163.59" fill="#352866" rx="11" ry="11" style="stroke:#E7E7E7;stroke-width:1;"/><path d="M395.4197,159.3556 L395.4197,157.1994 L402.8103,157.1994 L402.8103,159.3556 L400.3416,159.3556 L400.3416,167.4338 L402.8103,167.4338 L402.8103,169.59 L395.4197,169.59 L395.4197,167.4338 L397.8884,167.4338 L397.8884,159.3556 L395.4197,159.3556 Z " fill="#FFFFFF"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="48.3916" x="419.9978" y="168.4367">Source</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="252.24" x2="603.6472" y1="179.59" y2="179.59"/><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="252.24" x2="603.6472" y1="187.59" y2="187.59"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90.0703" x="257.24" y="204.5851">int getSize();</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126.1641" x="257.24" y="220.882">String getName();</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="184.7002" x="257.24" y="237.1789">DataBuffer readAllBytes();</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="306.0928" x="257.24" y="253.4757">DataBuffer readBytes(int offset, int length);</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="307.7402" x="257.24" y="269.7726">void writeBytes(int offset, DataBuffer data);</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163.2969" x="257.24" y="286.0695">boolean hasChanged();</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145.1475" x="257.24" y="302.3664">void clearChanges();</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="230.3574" x="257.24" y="318.6632">List&lt;Information&gt; information();</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="271.7217" x="257.24" y="334.9601">default boolean isApproxEQ(int value);</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="268.502" x="257.24" y="351.257">default boolean isApproxLE(int value);</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="341.4072" x="257.24" y="367.5539">default boolean extensionLike(String extension);</text></g><g class="entity" data-entity="FileSource" data-source-line="25" data-uid="ent0009" id="entity_FileSource"><rect fill="#313139" height="48" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="104.8369" x="11.52" y="434.86"/><ellipse cx="26.52" cy="450.86" fill="#2E5233" rx="11" ry="11" style="stroke:#E7E7E7;stroke-width:1;"/><path d="M29.4888,456.5006 Q28.9106,456.7975 28.27,456.9381 Q27.6294,457.0944 26.9263,457.0944 Q24.4263,457.0944 23.0981,455.4538 Q21.7856,453.7975 21.7856,450.6725 Q21.7856,447.5475 23.0981,445.8913 Q24.4263,444.235 26.9263,444.235 Q27.6294,444.235 28.27,444.3913 Q28.9263,444.5475 29.4888,444.8444 L29.4888,447.5631 Q28.8638,446.985 28.27,446.7194 Q27.6763,446.4381 27.0513,446.4381 Q25.7075,446.4381 25.02,447.5163 Q24.3325,448.5788 24.3325,450.6725 Q24.3325,452.7663 25.02,453.8444 Q25.7075,454.9069 27.0513,454.9069 Q27.6763,454.9069 28.27,454.6413 Q28.8638,454.36 29.4888,453.7819 L29.4888,456.5006 Z " fill="#FFFFFF"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72.8369" x="40.52" y="455.7067">FileSource</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="12.52" x2="115.3569" y1="466.86" y2="466.86"/><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="12.52" x2="115.3569" y1="474.86" y2="474.86"/></g><g class="entity" data-entity="UniversalDiskImage" data-source-line="27" data-uid="ent0011" id="entity_UniversalDiskImage"><rect fill="#313139" height="48" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="171.3438" x="151.27" y="434.86"/><ellipse cx="166.27" cy="450.86" fill="#2E5233" rx="11" ry="11" style="stroke:#E7E7E7;stroke-width:1;"/><path d="M169.2388,456.5006 Q168.6606,456.7975 168.02,456.9381 Q167.3794,457.0944 166.6763,457.0944 Q164.1763,457.0944 162.8481,455.4538 Q161.5356,453.7975 161.5356,450.6725 Q161.5356,447.5475 162.8481,445.8913 Q164.1763,444.235 166.6763,444.235 Q167.3794,444.235 168.02,444.3913 Q168.6763,444.5475 169.2388,444.8444 L169.2388,447.5631 Q168.6138,446.985 168.02,446.7194 Q167.4263,446.4381 166.8013,446.4381 Q165.4575,446.4381 164.77,447.5163 Q164.0825,448.5788 164.0825,450.6725 Q164.0825,452.7663 164.77,453.8444 Q165.4575,454.9069 166.8013,454.9069 Q167.4263,454.9069 168.02,454.6413 Q168.6138,454.36 169.2388,453.7819 L169.2388,456.5006 Z " fill="#FFFFFF"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139.3438" x="180.27" y="455.7067">UniversalDiskImage</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="152.27" x2="321.6138" y1="466.86" y2="466.86"/><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="152.27" x2="321.6138" y1="474.86" y2="474.86"/></g><g class="entity" data-entity="DiskCopyImage" data-source-line="29" data-uid="ent0013" id="entity_DiskCopyImage"><rect fill="#313139" height="48" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="141.4297" x="357.23" y="434.86"/><ellipse cx="372.23" cy="450.86" fill="#2E5233" rx="11" ry="11" style="stroke:#E7E7E7;stroke-width:1;"/><path d="M375.1988,456.5006 Q374.6206,456.7975 373.98,456.9381 Q373.3394,457.0944 372.6363,457.0944 Q370.1363,457.0944 368.8081,455.4538 Q367.4956,453.7975 367.4956,450.6725 Q367.4956,447.5475 368.8081,445.8913 Q370.1363,444.235 372.6363,444.235 Q373.3394,444.235 373.98,444.3913 Q374.6363,444.5475 375.1988,444.8444 L375.1988,447.5631 Q374.5738,446.985 373.98,446.7194 Q373.3863,446.4381 372.7613,446.4381 Q371.4175,446.4381 370.73,447.5163 Q370.0425,448.5788 370.0425,450.6725 Q370.0425,452.7663 370.73,453.8444 Q371.4175,454.9069 372.7613,454.9069 Q373.3863,454.9069 373.98,454.6413 Q374.5738,454.36 375.1988,453.7819 L375.1988,456.5006 Z " fill="#FFFFFF"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109.4297" x="386.23" y="455.7067">DiskCopyImage</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="358.23" x2="497.6597" y1="466.86" y2="466.86"/><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="358.23" x2="497.6597" y1="474.86" y2="474.86"/></g><g class="entity" data-entity="DataBufferSource" data-source-line="31" data-uid="ent0015" id="entity_DataBufferSource"><rect fill="#313139" height="48" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="156.5234" x="533.68" y="434.86"/><ellipse cx="548.68" cy="450.86" fill="#2E5233" rx="11" ry="11" style="stroke:#E7E7E7;stroke-width:1;"/><path d="M551.6488,456.5006 Q551.0706,456.7975 550.43,456.9381 Q549.7894,457.0944 549.0863,457.0944 Q546.5863,457.0944 545.2581,455.4538 Q543.9456,453.7975 543.9456,450.6725 Q543.9456,447.5475 545.2581,445.8913 Q546.5863,444.235 549.0863,444.235 Q549.7894,444.235 550.43,444.3913 Q551.0863,444.5475 551.6488,444.8444 L551.6488,447.5631 Q551.0238,446.985 550.43,446.7194 Q549.8363,446.4381 549.2113,446.4381 Q547.8675,446.4381 547.18,447.5163 Q546.4925,448.5788 546.4925,450.6725 Q546.4925,452.7663 547.18,453.8444 Q547.8675,454.9069 549.2113,454.9069 Q549.8363,454.9069 550.43,454.6413 Q551.0238,454.36 551.6488,453.7819 L551.6488,456.5006 Z " fill="#FFFFFF"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124.5234" x="562.68" y="455.7067">DataBufferSource</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="534.68" x2="689.2034" y1="466.86" y2="466.86"/><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="534.68" x2="689.2034" y1="474.86" y2="474.86"/></g><g class="entity" data-entity="FileEntrySource" data-source-line="33" data-uid="ent0017" id="entity_FileEntrySource"><rect fill="#313139" height="48" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="142.0859" x="724.9" y="434.86"/><ellipse cx="739.9" cy="450.86" fill="#2E5233" rx="11" ry="11" style="stroke:#E7E7E7;stroke-width:1;"/><path d="M742.8688,456.5006 Q742.2906,456.7975 741.65,456.9381 Q741.0094,457.0944 740.3063,457.0944 Q737.8063,457.0944 736.4781,455.4538 Q735.1656,453.7975 735.1656,450.6725 Q735.1656,447.5475 736.4781,445.8913 Q737.8063,444.235 740.3063,444.235 Q741.0094,444.235 741.65,444.3913 Q742.3063,444.5475 742.8688,444.8444 L742.8688,447.5631 Q742.2438,446.985 741.65,446.7194 Q741.0563,446.4381 740.4313,446.4381 Q739.0875,446.4381 738.4,447.5163 Q737.7125,448.5788 737.7125,450.6725 Q737.7125,452.7663 738.4,453.8444 Q739.0875,454.9069 740.4313,454.9069 Q741.0563,454.9069 741.65,454.6413 Q742.2438,454.36 742.8688,453.7819 L742.8688,456.5006 Z " fill="#FFFFFF"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110.0859" x="753.9" y="455.7067">FileEntrySource</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="725.9" x2="865.9859" y1="466.86" y2="466.86"/><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="725.9" x2="865.9859" y1="474.86" y2="474.86"/></g><g class="link" data-entity-1="CapabilityProvider" data-entity-2="Source" data-source-line="13" data-uid="lnk6" id="link_CapabilityProvider_Source"><path d="M193.0769,90.3462 C218.3469,108.6162 237.29,122.32 271.54,147.1" fill="none" id="CapabilityProvider-backto-Source" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="none" points="178.49,79.8,189.5615,95.2085,196.5923,85.4839,178.49,79.8" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="HintProvider" data-entity-2="Source" data-source-line="13" data-uid="lnk7" id="link_HintProvider_Source"><path d="M427.94,105.66 C427.94,122.78 427.94,125.8 427.94,147.2" fill="none" id="HintProvider-backto-Source" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="none" points="427.94,87.66,421.94,105.66,433.94,105.66,427.94,87.66" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="Container" data-entity-2="Source" data-source-line="13" data-uid="lnk8" id="link_Container_Source"><path d="M677.0078,89.9545 C650.2678,108.2245 629.66,122.32 593.42,147.1" fill="none" id="Container-backto-Source" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="none" points="691.87,79.8,673.6229,85.0005,680.3926,94.9086,691.87,79.8" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="Source" data-entity-2="FileSource" data-uid="lnk10" id="link_Source_FileSource"><path d="M234.8851,365.9819 C181.5451,394.6519 143.52,415.09 107.42,434.49" fill="none" id="Source-backto-FileSource" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="none" points="250.74,357.46,232.0445,360.697,237.7258,371.2669,250.74,357.46" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="Source" data-entity-2="UniversalDiskImage" data-uid="lnk12" id="link_Source_UniversalDiskImage"><path d="M305.0945,388.0585 C283.0945,410.5885 274.74,419.15 259.7,434.55" fill="none" id="Source-backto-UniversalDiskImage" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="none" points="317.67,375.18,300.8016,383.8667,309.3873,392.2503,317.67,375.18" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="Source" data-entity-2="DiskCopyImage" data-uid="lnk14" id="link_Source_DiskCopyImage"><path d="M427.94,393.18 C427.94,415.71 427.94,419.15 427.94,434.55" fill="none" id="Source-backto-DiskCopyImage" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="none" points="427.94,375.18,421.94,393.18,433.94,393.18,427.94,375.18" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="Source" data-entity-2="DataBufferSource" data-uid="lnk16" id="link_Source_DataBufferSource"><path d="M546.512,388.2919 C567.702,410.8219 575.53,419.15 590.02,434.55" fill="none" id="Source-backto-DataBufferSource" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="none" points="534.18,375.18,542.1414,392.4025,550.8826,384.1812,534.18,375.18" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="Source" data-entity-2="FileEntrySource" data-uid="lnk18" id="link_Source_FileEntrySource"><path d="M620.834,364.7686 C675.334,393.7386 714.76,414.7 751.74,434.36" fill="none" id="Source-backto-FileEntrySource" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="none" points="604.94,356.32,618.0178,370.0666,623.6503,359.4706,604.94,356.32" style="stroke:#E7E7E7;stroke-width:1;"/></g></g></svg></div></div>

<p>This is the interface for a <code>Source</code> factory. Note that in the first pass, a <code>Source</code> is identified via <code>fromObject(Object)</code>
and in the second pass is identified via <code>fromSource(Source)</code>. The <code>FileSource</code> is identified in the first round (handling GZip as well);
while the <code>DiskCopyImage</code> and <code>UniversalDiskImage</code> is identified via the second mechanism. Note that the <code>FileEntry</code> source
comes in programmatically (as in via a double-click in the GUI) and <code>DataBufferSource</code> is used for blank (new) images.</p>
<div class="highlight"><pre><span></span><code><span class="kd">interface</span> <span class="nc">Source</span><span class="p">.</span><span class="na">Factory</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Source</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">fromObject</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">object</span><span class="p">);</span>
<span class="w">    </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Source</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">fromSource</span><span class="p">(</span><span class="n">Source</span><span class="w"> </span><span class="n">source</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="disks">Disks</h3>
<p>To identify disks, a <code>DiskFactory</code> has been created that allows every type of disk to have its own dedicated discovery mechanism.
Prior to this, all that logic was mashed into the (old) <code>Disk</code> class and partially handled in the constructor and then handled
in the <code>getFormattedDisks</code> method itself. The intent of a <code>DiskFactory</code> is to get that logic out of the <code>Disk</code> and into a
dedicated filesystem (or other) discovery mechanism.</p>
<div class='puml-container'><div class="puml light" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="CLASS" height="560px" preserveAspectRatio="xMidYMid meet" style="width:456px;height:560px;background:#FFFFFF;" version="1.1" viewBox="0 0 456 560" width="456px" zoomAndPan="magnify" class="diagram"><defs/><g><g class="entity" data-entity="DiskFactory" data-source-line="3" data-uid="ent0002" id="entity_DiskFactory"><rect fill="#F1F1F1" height="64.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="193.4736" x="7" y="247.85"/><ellipse cx="58.2388" cy="263.85" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M54.1606,259.6156 L54.1606,257.4594 L61.5513,257.4594 L61.5513,259.6156 L59.0825,259.6156 L59.0825,267.6938 L61.5513,267.6938 L61.5513,269.85 L54.1606,269.85 L54.1606,267.6938 L56.6294,267.6938 L56.6294,259.6156 L54.1606,259.6156 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="82.4961" x="78.7388" y="268.6967">DiskFactory</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="199.4736" y1="279.85" y2="279.85"/><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="199.4736" y1="287.85" y2="287.85"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="181.4736" x="13" y="304.8451">void inspect(Context ctx);</text></g><g class="entity" data-entity="ProdosDiskFactory" data-source-line="6" data-uid="ent0003" id="entity_ProdosDiskFactory"><rect fill="#F1F1F1" height="48" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="162.0059" x="274.14" y="7"/><ellipse cx="289.14" cy="23" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M292.1088,28.6406 Q291.5306,28.9375 290.89,29.0781 Q290.2494,29.2344 289.5463,29.2344 Q287.0463,29.2344 285.7181,27.5938 Q284.4056,25.9375 284.4056,22.8125 Q284.4056,19.6875 285.7181,18.0313 Q287.0463,16.375 289.5463,16.375 Q290.2494,16.375 290.89,16.5313 Q291.5463,16.6875 292.1088,16.9844 L292.1088,19.7031 Q291.4838,19.125 290.89,18.8594 Q290.2963,18.5781 289.6713,18.5781 Q288.3275,18.5781 287.64,19.6563 Q286.9525,20.7188 286.9525,22.8125 Q286.9525,24.9063 287.64,25.9844 Q288.3275,27.0469 289.6713,27.0469 Q290.2963,27.0469 290.89,26.7813 Q291.4838,26.5 292.1088,25.9219 L292.1088,28.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130.0059" x="303.14" y="27.8467">ProdosDiskFactory</text><line style="stroke:#181818;stroke-width:0.5;" x1="275.14" x2="435.1459" y1="39" y2="39"/><line style="stroke:#181818;stroke-width:0.5;" x1="275.14" x2="435.1459" y1="47" y2="47"/></g><g class="entity" data-entity="NakedosDiskFactory" data-source-line="8" data-uid="ent0005" id="entity_NakedosDiskFactory"><rect fill="#F1F1F1" height="48" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="175.0146" x="267.63" y="90"/><ellipse cx="282.63" cy="106" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M285.5988,111.6406 Q285.0206,111.9375 284.38,112.0781 Q283.7394,112.2344 283.0363,112.2344 Q280.5363,112.2344 279.2081,110.5938 Q277.8956,108.9375 277.8956,105.8125 Q277.8956,102.6875 279.2081,101.0313 Q280.5363,99.375 283.0363,99.375 Q283.7394,99.375 284.38,99.5313 Q285.0363,99.6875 285.5988,99.9844 L285.5988,102.7031 Q284.9738,102.125 284.38,101.8594 Q283.7863,101.5781 283.1613,101.5781 Q281.8175,101.5781 281.13,102.6563 Q280.4425,103.7188 280.4425,105.8125 Q280.4425,107.9063 281.13,108.9844 Q281.8175,110.0469 283.1613,110.0469 Q283.7863,110.0469 284.38,109.7813 Q284.9738,109.5 285.5988,108.9219 L285.5988,111.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="143.0146" x="296.63" y="110.8467">NakedosDiskFactory</text><line style="stroke:#181818;stroke-width:0.5;" x1="268.63" x2="441.6446" y1="122" y2="122"/><line style="stroke:#181818;stroke-width:0.5;" x1="268.63" x2="441.6446" y1="130" y2="130"/></g><g class="entity" data-entity="CpmDiskFactory" data-source-line="10" data-uid="ent0007" id="entity_CpmDiskFactory"><rect fill="#F1F1F1" height="48" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="146.7959" x="281.74" y="173"/><ellipse cx="296.74" cy="189" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M299.7088,194.6406 Q299.1306,194.9375 298.49,195.0781 Q297.8494,195.2344 297.1463,195.2344 Q294.6463,195.2344 293.3181,193.5938 Q292.0056,191.9375 292.0056,188.8125 Q292.0056,185.6875 293.3181,184.0313 Q294.6463,182.375 297.1463,182.375 Q297.8494,182.375 298.49,182.5313 Q299.1463,182.6875 299.7088,182.9844 L299.7088,185.7031 Q299.0838,185.125 298.49,184.8594 Q297.8963,184.5781 297.2713,184.5781 Q295.9275,184.5781 295.24,185.6563 Q294.5525,186.7188 294.5525,188.8125 Q294.5525,190.9063 295.24,191.9844 Q295.9275,193.0469 297.2713,193.0469 Q297.8963,193.0469 298.49,192.7813 Q299.0838,192.5 299.7088,191.9219 L299.7088,194.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114.7959" x="310.74" y="193.8467">CpmDiskFactory</text><line style="stroke:#181818;stroke-width:0.5;" x1="282.74" x2="427.5359" y1="205" y2="205"/><line style="stroke:#181818;stroke-width:0.5;" x1="282.74" x2="427.5359" y1="213" y2="213"/></g><g class="entity" data-entity="PascalDiskFactory" data-source-line="12" data-uid="ent0009" id="entity_PascalDiskFactory"><rect fill="#F1F1F1" height="48" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="158.9775" x="275.65" y="256"/><ellipse cx="290.65" cy="272" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M293.6188,277.6406 Q293.0406,277.9375 292.4,278.0781 Q291.7594,278.2344 291.0563,278.2344 Q288.5563,278.2344 287.2281,276.5938 Q285.9156,274.9375 285.9156,271.8125 Q285.9156,268.6875 287.2281,267.0313 Q288.5563,265.375 291.0563,265.375 Q291.7594,265.375 292.4,265.5313 Q293.0563,265.6875 293.6188,265.9844 L293.6188,268.7031 Q292.9938,268.125 292.4,267.8594 Q291.8063,267.5781 291.1813,267.5781 Q289.8375,267.5781 289.15,268.6563 Q288.4625,269.7188 288.4625,271.8125 Q288.4625,273.9063 289.15,274.9844 Q289.8375,276.0469 291.1813,276.0469 Q291.8063,276.0469 292.4,275.7813 Q292.9938,275.5 293.6188,274.9219 L293.6188,277.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126.9775" x="304.65" y="276.8467">PascalDiskFactory</text><line style="stroke:#181818;stroke-width:0.5;" x1="276.65" x2="433.6275" y1="288" y2="288"/><line style="stroke:#181818;stroke-width:0.5;" x1="276.65" x2="433.6275" y1="296" y2="296"/></g><g class="entity" data-entity="GutenbergDiskFactory" data-source-line="14" data-uid="ent0011" id="entity_GutenbergDiskFactory"><rect fill="#F1F1F1" height="48" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="189.3359" x="260.47" y="339"/><ellipse cx="275.47" cy="355" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M278.4388,360.6406 Q277.8606,360.9375 277.22,361.0781 Q276.5794,361.2344 275.8763,361.2344 Q273.3763,361.2344 272.0481,359.5938 Q270.7356,357.9375 270.7356,354.8125 Q270.7356,351.6875 272.0481,350.0313 Q273.3763,348.375 275.8763,348.375 Q276.5794,348.375 277.22,348.5313 Q277.8763,348.6875 278.4388,348.9844 L278.4388,351.7031 Q277.8138,351.125 277.22,350.8594 Q276.6263,350.5781 276.0013,350.5781 Q274.6575,350.5781 273.97,351.6563 Q273.2825,352.7188 273.2825,354.8125 Q273.2825,356.9063 273.97,357.9844 Q274.6575,359.0469 276.0013,359.0469 Q276.6263,359.0469 277.22,358.7813 Q277.8138,358.5 278.4388,357.9219 L278.4388,360.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157.3359" x="289.47" y="359.8467">GutenbergDiskFactory</text><line style="stroke:#181818;stroke-width:0.5;" x1="261.47" x2="448.8059" y1="371" y2="371"/><line style="stroke:#181818;stroke-width:0.5;" x1="261.47" x2="448.8059" y1="379" y2="379"/></g><g class="entity" data-entity="DosDiskFactory" data-source-line="16" data-uid="ent0013" id="entity_DosDiskFactory"><rect fill="#F1F1F1" height="48" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141.1357" x="284.57" y="422"/><ellipse cx="299.57" cy="438" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M302.5388,443.6406 Q301.9606,443.9375 301.32,444.0781 Q300.6794,444.2344 299.9763,444.2344 Q297.4763,444.2344 296.1481,442.5938 Q294.8356,440.9375 294.8356,437.8125 Q294.8356,434.6875 296.1481,433.0313 Q297.4763,431.375 299.9763,431.375 Q300.6794,431.375 301.32,431.5313 Q301.9763,431.6875 302.5388,431.9844 L302.5388,434.7031 Q301.9138,434.125 301.32,433.8594 Q300.7263,433.5781 300.1013,433.5781 Q298.7575,433.5781 298.07,434.6563 Q297.3825,435.7188 297.3825,437.8125 Q297.3825,439.9063 298.07,440.9844 Q298.7575,442.0469 300.1013,442.0469 Q300.7263,442.0469 301.32,441.7813 Q301.9138,441.5 302.5388,440.9219 L302.5388,443.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109.1357" x="313.57" y="442.8467">DosDiskFactory</text><line style="stroke:#181818;stroke-width:0.5;" x1="285.57" x2="424.7057" y1="454" y2="454"/><line style="stroke:#181818;stroke-width:0.5;" x1="285.57" x2="424.7057" y1="462" y2="462"/></g><g class="entity" data-entity="RdosDiskFactory" data-source-line="18" data-uid="ent0015" id="entity_RdosDiskFactory"><rect fill="#F1F1F1" height="48" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="148.9697" x="280.66" y="505"/><ellipse cx="295.66" cy="521" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M298.6288,526.6406 Q298.0506,526.9375 297.41,527.0781 Q296.7694,527.2344 296.0663,527.2344 Q293.5663,527.2344 292.2381,525.5938 Q290.9256,523.9375 290.9256,520.8125 Q290.9256,517.6875 292.2381,516.0313 Q293.5663,514.375 296.0663,514.375 Q296.7694,514.375 297.41,514.5313 Q298.0663,514.6875 298.6288,514.9844 L298.6288,517.7031 Q298.0038,517.125 297.41,516.8594 Q296.8163,516.5781 296.1913,516.5781 Q294.8475,516.5781 294.16,517.6563 Q293.4725,518.7188 293.4725,520.8125 Q293.4725,522.9063 294.16,523.9844 Q294.8475,525.0469 296.1913,525.0469 Q296.8163,525.0469 297.41,524.7813 Q298.0038,524.5 298.6288,523.9219 L298.6288,526.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116.9697" x="309.66" y="525.8467">RdosDiskFactory</text><line style="stroke:#181818;stroke-width:0.5;" x1="281.66" x2="428.6297" y1="537" y2="537"/><line style="stroke:#181818;stroke-width:0.5;" x1="281.66" x2="428.6297" y1="545" y2="545"/></g><g class="link" data-entity-1="DiskFactory" data-entity-2="ProdosDiskFactory" data-uid="lnk4" id="link_DiskFactory_ProdosDiskFactory"><path d="M130.7886,231.647 C155.9186,186.797 197.73,121.75 260.47,72 C268.4,65.71 277.44,60.19 286.71,55.41" fill="none" id="DiskFactory-backto-ProdosDiskFactory" style="stroke:#181818;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="none" points="121.99,247.35,136.0229,234.5798,125.5543,228.7141,121.99,247.35" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="DiskFactory" data-entity-2="NakedosDiskFactory" data-uid="lnk6" id="link_DiskFactory_NakedosDiskFactory"><path d="M152.9606,235.5847 C183.2806,208.4847 215.84,182.03 260.47,155 C270.34,149.02 281.24,143.44 292.01,138.43" fill="none" id="DiskFactory-backto-NakedosDiskFactory" style="stroke:#181818;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="none" points="139.54,247.58,156.959,240.0582,148.9622,231.1111,139.54,247.58" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="DiskFactory" data-entity-2="CpmDiskFactory" data-uid="lnk8" id="link_DiskFactory_CpmDiskFactory"><path d="M217.8882,242.3436 C244.6482,233.4336 256.18,229.6 281.36,221.22" fill="none" id="DiskFactory-backto-CpmDiskFactory" style="stroke:#181818;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="none" points="200.81,248.03,219.7837,248.0364,215.9928,236.6509,200.81,248.03" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="DiskFactory" data-entity-2="PascalDiskFactory" data-uid="lnk10" id="link_DiskFactory_PascalDiskFactory"><path d="M218.81,280 C243.51,280 251.79,280 275.49,280" fill="none" id="DiskFactory-backto-PascalDiskFactory" style="stroke:#181818;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="none" points="200.81,280,218.81,286,218.81,274,200.81,280" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="DiskFactory" data-entity-2="GutenbergDiskFactory" data-uid="lnk12" id="link_DiskFactory_GutenbergDiskFactory"><path d="M217.8895,317.6524 C244.3695,326.4624 255.6,330.2 280.59,338.52" fill="none" id="DiskFactory-backto-GutenbergDiskFactory" style="stroke:#181818;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="none" points="200.81,311.97,215.9954,323.3456,219.7837,311.9593,200.81,311.97" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="DiskFactory" data-entity-2="DosDiskFactory" data-uid="lnk14" id="link_DiskFactory_DosDiskFactory"><path d="M152.9606,324.4153 C183.2806,351.5153 215.84,377.97 260.47,405 C270.34,410.98 281.24,416.56 292.01,421.57" fill="none" id="DiskFactory-backto-DosDiskFactory" style="stroke:#181818;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="none" points="139.54,312.42,148.9622,328.8889,156.959,319.9418,139.54,312.42" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="DiskFactory" data-entity-2="RdosDiskFactory" data-uid="lnk16" id="link_DiskFactory_RdosDiskFactory"><path d="M130.7886,328.353 C155.9186,373.203 197.73,438.25 260.47,488 C268.4,494.29 277.44,499.81 286.71,504.59" fill="none" id="DiskFactory-backto-RdosDiskFactory" style="stroke:#181818;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="none" points="121.99,312.65,125.5543,331.2859,136.0229,325.4202,121.99,312.65" style="stroke:#181818;stroke-width:1;"/></g></g></svg></div><div class="puml dark" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="CLASS" height="560px" preserveAspectRatio="xMidYMid meet" style="width:456px;height:560px;background:#1B1B1B;" version="1.1" viewBox="0 0 456 560" width="456px" zoomAndPan="magnify" class="diagram"><defs/><g><rect fill="#1B1B1B" height="560" style="stroke:none;stroke-width:1;" width="456" x="0" y="0"/><g class="entity" data-entity="DiskFactory" data-source-line="3" data-uid="ent0002" id="entity_DiskFactory"><rect fill="#313139" height="64.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="193.4736" x="7" y="247.85"/><ellipse cx="58.2388" cy="263.85" fill="#352866" rx="11" ry="11" style="stroke:#E7E7E7;stroke-width:1;"/><path d="M54.1606,259.6156 L54.1606,257.4594 L61.5513,257.4594 L61.5513,259.6156 L59.0825,259.6156 L59.0825,267.6938 L61.5513,267.6938 L61.5513,269.85 L54.1606,269.85 L54.1606,267.6938 L56.6294,267.6938 L56.6294,259.6156 L54.1606,259.6156 Z " fill="#FFFFFF"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="82.4961" x="78.7388" y="268.6967">DiskFactory</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="8" x2="199.4736" y1="279.85" y2="279.85"/><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="8" x2="199.4736" y1="287.85" y2="287.85"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="181.4736" x="13" y="304.8451">void inspect(Context ctx);</text></g><g class="entity" data-entity="ProdosDiskFactory" data-source-line="6" data-uid="ent0003" id="entity_ProdosDiskFactory"><rect fill="#313139" height="48" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="162.0059" x="274.14" y="7"/><ellipse cx="289.14" cy="23" fill="#2E5233" rx="11" ry="11" style="stroke:#E7E7E7;stroke-width:1;"/><path d="M292.1088,28.6406 Q291.5306,28.9375 290.89,29.0781 Q290.2494,29.2344 289.5463,29.2344 Q287.0463,29.2344 285.7181,27.5938 Q284.4056,25.9375 284.4056,22.8125 Q284.4056,19.6875 285.7181,18.0313 Q287.0463,16.375 289.5463,16.375 Q290.2494,16.375 290.89,16.5313 Q291.5463,16.6875 292.1088,16.9844 L292.1088,19.7031 Q291.4838,19.125 290.89,18.8594 Q290.2963,18.5781 289.6713,18.5781 Q288.3275,18.5781 287.64,19.6563 Q286.9525,20.7188 286.9525,22.8125 Q286.9525,24.9063 287.64,25.9844 Q288.3275,27.0469 289.6713,27.0469 Q290.2963,27.0469 290.89,26.7813 Q291.4838,26.5 292.1088,25.9219 L292.1088,28.6406 Z " fill="#FFFFFF"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130.0059" x="303.14" y="27.8467">ProdosDiskFactory</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="275.14" x2="435.1459" y1="39" y2="39"/><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="275.14" x2="435.1459" y1="47" y2="47"/></g><g class="entity" data-entity="NakedosDiskFactory" data-source-line="8" data-uid="ent0005" id="entity_NakedosDiskFactory"><rect fill="#313139" height="48" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="175.0146" x="267.63" y="90"/><ellipse cx="282.63" cy="106" fill="#2E5233" rx="11" ry="11" style="stroke:#E7E7E7;stroke-width:1;"/><path d="M285.5988,111.6406 Q285.0206,111.9375 284.38,112.0781 Q283.7394,112.2344 283.0363,112.2344 Q280.5363,112.2344 279.2081,110.5938 Q277.8956,108.9375 277.8956,105.8125 Q277.8956,102.6875 279.2081,101.0313 Q280.5363,99.375 283.0363,99.375 Q283.7394,99.375 284.38,99.5313 Q285.0363,99.6875 285.5988,99.9844 L285.5988,102.7031 Q284.9738,102.125 284.38,101.8594 Q283.7863,101.5781 283.1613,101.5781 Q281.8175,101.5781 281.13,102.6563 Q280.4425,103.7188 280.4425,105.8125 Q280.4425,107.9063 281.13,108.9844 Q281.8175,110.0469 283.1613,110.0469 Q283.7863,110.0469 284.38,109.7813 Q284.9738,109.5 285.5988,108.9219 L285.5988,111.6406 Z " fill="#FFFFFF"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="143.0146" x="296.63" y="110.8467">NakedosDiskFactory</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="268.63" x2="441.6446" y1="122" y2="122"/><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="268.63" x2="441.6446" y1="130" y2="130"/></g><g class="entity" data-entity="CpmDiskFactory" data-source-line="10" data-uid="ent0007" id="entity_CpmDiskFactory"><rect fill="#313139" height="48" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="146.7959" x="281.74" y="173"/><ellipse cx="296.74" cy="189" fill="#2E5233" rx="11" ry="11" style="stroke:#E7E7E7;stroke-width:1;"/><path d="M299.7088,194.6406 Q299.1306,194.9375 298.49,195.0781 Q297.8494,195.2344 297.1463,195.2344 Q294.6463,195.2344 293.3181,193.5938 Q292.0056,191.9375 292.0056,188.8125 Q292.0056,185.6875 293.3181,184.0313 Q294.6463,182.375 297.1463,182.375 Q297.8494,182.375 298.49,182.5313 Q299.1463,182.6875 299.7088,182.9844 L299.7088,185.7031 Q299.0838,185.125 298.49,184.8594 Q297.8963,184.5781 297.2713,184.5781 Q295.9275,184.5781 295.24,185.6563 Q294.5525,186.7188 294.5525,188.8125 Q294.5525,190.9063 295.24,191.9844 Q295.9275,193.0469 297.2713,193.0469 Q297.8963,193.0469 298.49,192.7813 Q299.0838,192.5 299.7088,191.9219 L299.7088,194.6406 Z " fill="#FFFFFF"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114.7959" x="310.74" y="193.8467">CpmDiskFactory</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="282.74" x2="427.5359" y1="205" y2="205"/><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="282.74" x2="427.5359" y1="213" y2="213"/></g><g class="entity" data-entity="PascalDiskFactory" data-source-line="12" data-uid="ent0009" id="entity_PascalDiskFactory"><rect fill="#313139" height="48" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="158.9775" x="275.65" y="256"/><ellipse cx="290.65" cy="272" fill="#2E5233" rx="11" ry="11" style="stroke:#E7E7E7;stroke-width:1;"/><path d="M293.6188,277.6406 Q293.0406,277.9375 292.4,278.0781 Q291.7594,278.2344 291.0563,278.2344 Q288.5563,278.2344 287.2281,276.5938 Q285.9156,274.9375 285.9156,271.8125 Q285.9156,268.6875 287.2281,267.0313 Q288.5563,265.375 291.0563,265.375 Q291.7594,265.375 292.4,265.5313 Q293.0563,265.6875 293.6188,265.9844 L293.6188,268.7031 Q292.9938,268.125 292.4,267.8594 Q291.8063,267.5781 291.1813,267.5781 Q289.8375,267.5781 289.15,268.6563 Q288.4625,269.7188 288.4625,271.8125 Q288.4625,273.9063 289.15,274.9844 Q289.8375,276.0469 291.1813,276.0469 Q291.8063,276.0469 292.4,275.7813 Q292.9938,275.5 293.6188,274.9219 L293.6188,277.6406 Z " fill="#FFFFFF"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126.9775" x="304.65" y="276.8467">PascalDiskFactory</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="276.65" x2="433.6275" y1="288" y2="288"/><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="276.65" x2="433.6275" y1="296" y2="296"/></g><g class="entity" data-entity="GutenbergDiskFactory" data-source-line="14" data-uid="ent0011" id="entity_GutenbergDiskFactory"><rect fill="#313139" height="48" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="189.3359" x="260.47" y="339"/><ellipse cx="275.47" cy="355" fill="#2E5233" rx="11" ry="11" style="stroke:#E7E7E7;stroke-width:1;"/><path d="M278.4388,360.6406 Q277.8606,360.9375 277.22,361.0781 Q276.5794,361.2344 275.8763,361.2344 Q273.3763,361.2344 272.0481,359.5938 Q270.7356,357.9375 270.7356,354.8125 Q270.7356,351.6875 272.0481,350.0313 Q273.3763,348.375 275.8763,348.375 Q276.5794,348.375 277.22,348.5313 Q277.8763,348.6875 278.4388,348.9844 L278.4388,351.7031 Q277.8138,351.125 277.22,350.8594 Q276.6263,350.5781 276.0013,350.5781 Q274.6575,350.5781 273.97,351.6563 Q273.2825,352.7188 273.2825,354.8125 Q273.2825,356.9063 273.97,357.9844 Q274.6575,359.0469 276.0013,359.0469 Q276.6263,359.0469 277.22,358.7813 Q277.8138,358.5 278.4388,357.9219 L278.4388,360.6406 Z " fill="#FFFFFF"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157.3359" x="289.47" y="359.8467">GutenbergDiskFactory</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="261.47" x2="448.8059" y1="371" y2="371"/><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="261.47" x2="448.8059" y1="379" y2="379"/></g><g class="entity" data-entity="DosDiskFactory" data-source-line="16" data-uid="ent0013" id="entity_DosDiskFactory"><rect fill="#313139" height="48" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="141.1357" x="284.57" y="422"/><ellipse cx="299.57" cy="438" fill="#2E5233" rx="11" ry="11" style="stroke:#E7E7E7;stroke-width:1;"/><path d="M302.5388,443.6406 Q301.9606,443.9375 301.32,444.0781 Q300.6794,444.2344 299.9763,444.2344 Q297.4763,444.2344 296.1481,442.5938 Q294.8356,440.9375 294.8356,437.8125 Q294.8356,434.6875 296.1481,433.0313 Q297.4763,431.375 299.9763,431.375 Q300.6794,431.375 301.32,431.5313 Q301.9763,431.6875 302.5388,431.9844 L302.5388,434.7031 Q301.9138,434.125 301.32,433.8594 Q300.7263,433.5781 300.1013,433.5781 Q298.7575,433.5781 298.07,434.6563 Q297.3825,435.7188 297.3825,437.8125 Q297.3825,439.9063 298.07,440.9844 Q298.7575,442.0469 300.1013,442.0469 Q300.7263,442.0469 301.32,441.7813 Q301.9138,441.5 302.5388,440.9219 L302.5388,443.6406 Z " fill="#FFFFFF"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109.1357" x="313.57" y="442.8467">DosDiskFactory</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="285.57" x2="424.7057" y1="454" y2="454"/><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="285.57" x2="424.7057" y1="462" y2="462"/></g><g class="entity" data-entity="RdosDiskFactory" data-source-line="18" data-uid="ent0015" id="entity_RdosDiskFactory"><rect fill="#313139" height="48" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="148.9697" x="280.66" y="505"/><ellipse cx="295.66" cy="521" fill="#2E5233" rx="11" ry="11" style="stroke:#E7E7E7;stroke-width:1;"/><path d="M298.6288,526.6406 Q298.0506,526.9375 297.41,527.0781 Q296.7694,527.2344 296.0663,527.2344 Q293.5663,527.2344 292.2381,525.5938 Q290.9256,523.9375 290.9256,520.8125 Q290.9256,517.6875 292.2381,516.0313 Q293.5663,514.375 296.0663,514.375 Q296.7694,514.375 297.41,514.5313 Q298.0663,514.6875 298.6288,514.9844 L298.6288,517.7031 Q298.0038,517.125 297.41,516.8594 Q296.8163,516.5781 296.1913,516.5781 Q294.8475,516.5781 294.16,517.6563 Q293.4725,518.7188 293.4725,520.8125 Q293.4725,522.9063 294.16,523.9844 Q294.8475,525.0469 296.1913,525.0469 Q296.8163,525.0469 297.41,524.7813 Q298.0038,524.5 298.6288,523.9219 L298.6288,526.6406 Z " fill="#FFFFFF"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116.9697" x="309.66" y="525.8467">RdosDiskFactory</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="281.66" x2="428.6297" y1="537" y2="537"/><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="281.66" x2="428.6297" y1="545" y2="545"/></g><g class="link" data-entity-1="DiskFactory" data-entity-2="ProdosDiskFactory" data-uid="lnk4" id="link_DiskFactory_ProdosDiskFactory"><path d="M130.7886,231.647 C155.9186,186.797 197.73,121.75 260.47,72 C268.4,65.71 277.44,60.19 286.71,55.41" fill="none" id="DiskFactory-backto-ProdosDiskFactory" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="none" points="121.99,247.35,136.0229,234.5798,125.5543,228.7141,121.99,247.35" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="DiskFactory" data-entity-2="NakedosDiskFactory" data-uid="lnk6" id="link_DiskFactory_NakedosDiskFactory"><path d="M152.9606,235.5847 C183.2806,208.4847 215.84,182.03 260.47,155 C270.34,149.02 281.24,143.44 292.01,138.43" fill="none" id="DiskFactory-backto-NakedosDiskFactory" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="none" points="139.54,247.58,156.959,240.0582,148.9622,231.1111,139.54,247.58" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="DiskFactory" data-entity-2="CpmDiskFactory" data-uid="lnk8" id="link_DiskFactory_CpmDiskFactory"><path d="M217.8882,242.3436 C244.6482,233.4336 256.18,229.6 281.36,221.22" fill="none" id="DiskFactory-backto-CpmDiskFactory" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="none" points="200.81,248.03,219.7837,248.0364,215.9928,236.6509,200.81,248.03" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="DiskFactory" data-entity-2="PascalDiskFactory" data-uid="lnk10" id="link_DiskFactory_PascalDiskFactory"><path d="M218.81,280 C243.51,280 251.79,280 275.49,280" fill="none" id="DiskFactory-backto-PascalDiskFactory" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="none" points="200.81,280,218.81,286,218.81,274,200.81,280" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="DiskFactory" data-entity-2="GutenbergDiskFactory" data-uid="lnk12" id="link_DiskFactory_GutenbergDiskFactory"><path d="M217.8895,317.6524 C244.3695,326.4624 255.6,330.2 280.59,338.52" fill="none" id="DiskFactory-backto-GutenbergDiskFactory" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="none" points="200.81,311.97,215.9954,323.3456,219.7837,311.9593,200.81,311.97" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="DiskFactory" data-entity-2="DosDiskFactory" data-uid="lnk14" id="link_DiskFactory_DosDiskFactory"><path d="M152.9606,324.4153 C183.2806,351.5153 215.84,377.97 260.47,405 C270.34,410.98 281.24,416.56 292.01,421.57" fill="none" id="DiskFactory-backto-DosDiskFactory" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="none" points="139.54,312.42,148.9622,328.8889,156.959,319.9418,139.54,312.42" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="DiskFactory" data-entity-2="RdosDiskFactory" data-uid="lnk16" id="link_DiskFactory_RdosDiskFactory"><path d="M130.7886,328.353 C155.9186,373.203 197.73,438.25 260.47,488 C268.4,494.29 277.44,499.81 286.71,504.59" fill="none" id="DiskFactory-backto-RdosDiskFactory" style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="none" points="121.99,312.65,125.5543,331.2859,136.0229,325.4202,121.99,312.65" style="stroke:#E7E7E7;stroke-width:1;"/></g></g></svg></div></div>

<p>Harnessing the <code>DiskFactory</code> is rather straight-forward. Use <code>Disks#inspect(Source)</code> to initiate discovery. For example:</p>
<div class="highlight"><pre><span></span><code><span class="n">Source</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Sources</span><span class="p">.</span><span class="na">create</span><span class="p">(</span><span class="n">imageName</span><span class="p">).</span><span class="na">orElseThrow</span><span class="p">();</span>
<span class="n">DiskFactory</span><span class="p">.</span><span class="na">Context</span><span class="w"> </span><span class="n">ctx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Disks</span><span class="p">.</span><span class="na">inspect</span><span class="p">(</span><span class="n">source</span><span class="p">);</span>
</code></pre></div>
<p>This will hand back a <code>Context</code>. This contains all the information used to create <code>FormattedDisk</code>s, including the <code>Source</code>,
and any <code>NibbleTrackReaderWriter</code>s should that be applicable.</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Context</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Source</span><span class="w"> </span><span class="n">source</span><span class="p">;</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">NibbleTrackReaderWriter</span><span class="w"> </span><span class="n">nibbleTrackReaderWriter</span><span class="p">;</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">FormattedDisk</span><span class="o">&gt;</span><span class="w"> </span><span class="n">disks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">BlockDeviceBuilder</span><span class="w"> </span><span class="nf">blockDevice</span><span class="p">();</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">TrackSectorDeviceBuilder</span><span class="w"> </span><span class="nf">trackSectorDevice</span><span class="p">();</span>
<span class="p">}</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BlockDeviceBuilder</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">BlockDeviceBuilder</span><span class="w"> </span><span class="nf">include16Sector</span><span class="p">(</span><span class="n">Hint</span><span class="w"> </span><span class="n">hint</span><span class="p">);</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">BlockDeviceBuilder</span><span class="w"> </span><span class="nf">include800K</span><span class="p">();</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">BlockDeviceBuilder</span><span class="w"> </span><span class="nf">includeHDV</span><span class="p">();</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">BlockDevice</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">get</span><span class="p">();</span>
<span class="p">}</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TrackSectorDeviceBuilder</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">TrackSectorDeviceBuilder</span><span class="w"> </span><span class="nf">include13Sector</span><span class="p">();</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">TrackSectorDeviceBuilder</span><span class="w"> </span><span class="nf">include16Sector</span><span class="p">(</span><span class="n">Hint</span><span class="w"> </span><span class="n">hint</span><span class="p">);</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">TrackSectorDevice</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">get</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<p>Most of the time, <code>disks</code> is what you'll need. If nothing is recognized, <code>disks</code> will be empty, however, the device
builder may be used to create an appropriate device. If applicable, a <code>NibbleTrackReaderWriter</code> will be avilable (either <code>*.nib</code>
or a <code>*.woz</code> image).  Of course, <code>Source</code> is what is handed into the <code>Disks#inspect(Source)</code> method.</p>
<p>Examples of using the builder interfaces:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">TrackSectorDevice</label><label for="__tabbed_1_2">BlockDevice</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>List&lt;TrackSectorDevice&gt; sectorDevices = ctx.trackSectorDevice()
                .include13Sector()
                .include16Sector(Hint.DOS_SECTOR_ORDER)
                .get()
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>List&lt;BlockDevice&gt; blockDevices = ctx.blockDevice()
        .include16Sector(Hint.PRODOS_BLOCK_ORDER)
        .include800K()
        .includeHDV()
        .get();
</code></pre></div>
</div>
</div>
</div>
<h3 id="other-semi-experimental">Other (semi-experimental)</h3>
<blockquote>
<p>Some of these are in play today (<code>DataBuffer</code>, <code>HintProvider</code>, and <code>Information</code>) and others are partly implemented 
(<code>CapabilityProvider</code> and <code>Container</code>).</p>
</blockquote>
<h4 id="databuffer">DataBuffer</h4>
<p>A lot of functionality was encompassed in <code>AppleUtil</code>. As an experiment, <code>DataBuffer</code> has been created to wrap around that 
functionality (reading unsigned bytes, unsigned words, 32-bit integers, handling little-ending vs big-endian numbers, etc).
That <code>DataBuffer</code> can "get" from a specified offset, or can "read" in a forward manner. Usage depends on what is needed.</p>
<h4 id="capabilityprovider">CapabilityProvider</h4>
<p>The concept of a capability is "what can this -thing- do?"  This is still early and won't really show up until devices
are put together. But you might as if this "thing" can "write" or "save to disk". Instead of having a bunch of dedicated
"is" methods, this should help clean up the API.</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">CapabilityProvider</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">can</span><span class="p">(</span><span class="n">Capability</span><span class="w"> </span><span class="n">capability</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>Expected usage:</p>
<div class="highlight"><pre><span></span><code><span class="n">FormattedDisk</span><span class="w"> </span><span class="n">disk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...;</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">disk</span><span class="p">.</span><span class="na">can</span><span class="p">(</span><span class="n">Capability</span><span class="p">.</span><span class="na">SAVE_TO_FILE</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">window</span><span class="p">.</span><span class="na">enableSaveButton</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="hintprovider">HintProvider</h4>
<p>"Hints" are used to indicate somewthing we know. In particular, a <code>Hint</code> is used while creating the disk image. One example
is if we know the sector ordering for a disk. We can provide that hint for certain sources (DiskCopy, 2IMG, and the current
<code>FileEntry</code> sources do this).</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">HintProvider</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">is</span><span class="p">(</span><span class="n">Hint</span><span class="w"> </span><span class="n">hint</span><span class="p">);</span>
<span class="w">    </span><span class="k">default</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isAny</span><span class="p">(</span><span class="n">Hint</span><span class="p">...</span><span class="w"> </span><span class="n">hints</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>Example usage:</p>
<div class="highlight"><pre><span></span><code><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">source</span><span class="p">.</span><span class="na">is</span><span class="p">(</span><span class="n">Hint</span><span class="p">.</span><span class="na">PRODOS_BLOCK_ORDER</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="container">Container</h4>
<p>A "Container" allows pulling out internal components without providing a bunch of random "get" methods. For instance, the current
<code>FormattedDisk</code> (and <code>Disk</code> before that) as well as (the retired) <code>ImageOrder</code> all support both block and track/sector reading and writing. 
So, a ProDOS disk has reading by block or sector. DOS hsa reading by block or sector, etc. RDOS has, not only block or sector, 
but also "RDOS" block (256) bytes; and CP/M is the same except the CP/M block is 1024 bytes. It would be nice to hide all that 
cruft and "ask" the (in this case) file system if it supported a particular type of device. That's where containers come into 
play -- we expose one "get" method that then looks for that type of item. It returns a Java <code>Optional</code>, so it may not and we 
can handle that accordingly.</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">Container</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="n">Class</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">iface</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>Expected usage:</p>
<div class="highlight"><pre><span></span><code><span class="n">Optional</span><span class="o">&lt;</span><span class="n">BlockDevice</span><span class="o">&gt;</span><span class="w"> </span><span class="n">blockOpt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">disk</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">BlockDevice</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="n">blockOpt</span><span class="p">.</span><span class="na">isPresent</span><span class="p">(</span><span class="n">device</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">DataBuffer</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">device</span><span class="p">.</span><span class="na">readBlock</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">});</span>
</code></pre></div>
<h4 id="information">Information</h4>
<p>A lot of things have extra information about them. DiskCopy has image type, disk name, and disk format (for instance) while
2IMG supports ordering, creator, and comments. These are available through a generic <code>getInformation()</code> method call.</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">record</span> <span class="nc">Information</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">label</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="p">}</span>
</code></pre></div>
<p>Note that the <code>Information</code> record includes a builder to aid in construction.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Override</span>
<span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Information</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">information</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Information</span><span class="o">&gt;</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">source</span><span class="p">.</span><span class="na">information</span><span class="p">();</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="w">    </span><span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">Information</span><span class="p">.</span><span class="na">builder</span><span class="p">(</span><span class="s">&quot;Image Type&quot;</span><span class="p">).</span><span class="na">value</span><span class="p">(</span><span class="s">&quot;Universal Disk Image (2IMG/2MG)&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">Information</span><span class="p">.</span><span class="na">builder</span><span class="p">(</span><span class="s">&quot;ProDOS Blocks&quot;</span><span class="p">).</span><span class="na">value</span><span class="p">(</span><span class="n">info</span><span class="p">.</span><span class="na">prodosBlocks</span><span class="p">()));</span>
<span class="w">    </span><span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">Information</span><span class="p">.</span><span class="na">builder</span><span class="p">(</span><span class="s">&quot;Data Offset &amp; Length&quot;</span><span class="p">).</span><span class="na">value</span><span class="p">(</span><span class="s">&quot;$%08x &amp; %08x&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="n">info</span><span class="p">.</span><span class="na">dataOffset</span><span class="p">(),</span><span class="w"> </span><span class="n">info</span><span class="p">.</span><span class="na">dataLength</span><span class="p">()));</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2002 - 2025 Robert Greene
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.50899def.min.js"></script>
      
        <script src="../../assets/mkdocs_puml/puml.js"></script>
      
        <script src="https://unpkg.com/@panzoom/panzoom@4.5.1/dist/panzoom.min.js"></script>
      
        <script src="../../assets/mkdocs_puml/interaction.js"></script>
      
    
  </body>
</html>